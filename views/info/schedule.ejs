<script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
<script type="application/javascript">
	var scheduleApp = angular.module('scheduleApp', []);
	scheduleApp.controller("scheduleController", ["$scope", "$location", "$http", function ($scope, $location, $http) {
		$scope.startup = function() {
			var tour = $scope.getParam('tour');
			$http({
				method: 'GET',
				url: '/tournament/' + tour
			})
			.success(function(data, status) {
				if(data.indoor) {
					window.location = '/info/indoor';
				}
				else {
					window.location = '/info/outdoor';
				}
			});
		};
		
		$scope.getParam = function(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
			return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		};
	}]);
</script>
<div ng-app="scheduleApp" ng-controller="scheduleController" ng-init="startup()">
</div>